# 线程池问题

### 目录

---
<a href="#1">1. 网站的高并发,大流量访问怎么解决?</a> <br>
<a href="#2">2. 可扩展到任何高并发网站要考虑的并发读写问题</a> <br>


### <a name="1">1. 网站的高并发,大流量访问怎么解决?</a>
#### 1.HTML 页面静态化
&ensp;&ensp;&ensp;&ensp;
    访问频率较高但内容变动较小,使用网站 HTML 静态化方案来优化访问速度。将社区
内的帖子、文章进行实时的静态化,有更新的时候再重新静态化也是大量使用的策略。 <br>
&ensp;&ensp;&ensp;&ensp;
    优势: <br>
&ensp;&ensp;&ensp;&ensp;
    一、减轻服务器负担。 <br>
&ensp;&ensp;&ensp;&ensp;
    二、加快页面打开速度,***静态页面无需访问数据库***,打开速度较动态页面有明显提高; <br>
&ensp;&ensp;&ensp;&ensp;
    三、很多搜索引擎都会优先收录静态页面,不仅被收录的快,还收录的全,容易被搜
索引擎找到; <br>
&ensp;&ensp;&ensp;&ensp;
    四、HTML 静态页面不会受程序相关漏洞的影响,减少攻击 ,提高安全性。 <br>
#### 2.图片服务器和应用服务器相分离
&ensp;&ensp;&ensp;&ensp;
    现在很多的网站上都会用到大量的图片,而图片是网页传输中占主要的数据量,也是影
响网站性能的主要因素。因此很多网站都会将图片存储从网站中分离出来,另外架构一个
或多个服务器来存储图片,将图片放到一个虚拟目录中,而网页上的图片都用一个 URL 地
址来指向这些服务器上的图片的地址,这样的话网站的性能就明显提高了。 <br>
&ensp;&ensp;&ensp;&ensp;
    优势: <br>
&ensp;&ensp;&ensp;&ensp;
    一、 分担 Web 服务器的 I/O 负载-将耗费资源的图片服务分离出来,提高服务器的性能
和稳定性。 <br>
&ensp;&ensp;&ensp;&ensp;
    二、 能够专门对图片服务器进行优化-为图片服务设置有针对性的***缓存***方案,减少带宽
成本,提高访问速度。 <br>
&ensp;&ensp;&ensp;&ensp;
    三、 提高网站的可扩展性-通过增加图片服务器,提高图片吞吐能力。 <br>
#### 3.数据库
&ensp;&ensp;&ensp;&ensp;
    见“数据库部分的---如果有一个特别大的访问量到数据库上,怎么做优化?”。 <br>
#### 4.缓存
&ensp;&ensp;&ensp;&ensp;
    尽量使用缓存,包括用户缓存,信息缓存等,多花点内存来做缓存,可以大量减少与
数据库的交互,提高性能。 <br>
假如我们能减少数据库频繁的访问,那对系统肯定大大有利的。比如一个电子商务系
统的商品搜索,如果某个关键字的商品经常被搜,那就可以考虑这部分商品列表存放到缓
存(内存中去),这样不用每次访问数据库,性能大大增加。 <br>
#### 5.镜像
&ensp;&ensp;&ensp;&ensp;
    镜像是冗余的一种类型,一个磁盘上的数据在另一个磁盘上存在一个完全相同的副本
即为镜像。 <br>
#### 6.负载均衡
&ensp;&ensp;&ensp;&ensp;
    在网站高并发访问的场景下,使用负载均衡技术(负载均衡服务器)为一个应用构建
一个由多台服务器组成的服务器集群,将并发访问请求分发到多台服务器上处理,避免单
一服务器因负载压力过大而响应缓慢,使用户请求具有更好的响应延迟特性。 <br>
#### 7.并发控制
&ensp;&ensp;&ensp;&ensp;
    加锁,如乐观锁和悲观锁。 <br>
#### 8. 消息队列 
&ensp;&ensp;&ensp;&ensp;
    通过 mq 一个一个排队方式,跟 12306 一样。 <br>


### <a name="2">2. 可扩展到任何高并发网站要考虑的并发读写问题</a>
&ensp;&ensp;&ensp;&ensp;
    ***订票系统,某车次只有一张火车票,假定有 1w 个人同
时打开 12306 网站来订票,如何解决并发问题?(可扩展
到任何高并发网站要考虑的并发读写问题)。*** <br>

&ensp;&ensp;&ensp;&ensp;
    不但要保证 1w 个人能同时看到有票(数据的可读性),还要保证最终只能
由一个人买到票(数据的排他性)。 <br>
&ensp;&ensp;&ensp;&ensp;
    使用数据库层面的并发访问控制机制。采用乐观锁即可解决此问题。乐观
锁意思是不锁定表的情况下,利用业务的控制来解决并发问题,这样既保证数
据的并发***可读性***,又保证保存数据的***排他性***,保证性能的同时解决了并发带来
的脏数据问题。hibernate 中实现乐观锁。 <br>
&ensp;&ensp;&ensp;&ensp;
    银行两操作员同时操作同一账户就是典型的例子。比如 A、B 操作员同
时读取一余额为 1000 元的账户,A 操作员为该账户增加 100 元,B 操作员同时
为该账户减去 50 元, A 先提交, B 后提交。 最后实际账户余额为 1000-50=950
元,但本该为 1000+100-50=1050。这就是典型的并发问题。如何解决?可以
用锁。 <br>

---
### 搬运工信息
Author:Jason Lou <br>
Email:vip.iotworld@gmail.com <br>
Blog:https://blog.csdn.net/qq_21508727 <br>
Github:https://github.com/JGPY/JavaGuideBooster <br>
---